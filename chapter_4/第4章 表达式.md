# 第4章 表达式
## 4.1 基础
### 4.1.1 基本概念
**表达式**由一个或多个运算对象组成，对表达式求值将得到一个结果。字面值和变量是最简单的表达式。

当一个对象被用作右值时，用的是对象的值；当一个对象被用作左值时，用的是对象的内存地址。
### 4.1.2 优先级与结合律
### 4.1.3 求值顺序
## 4.2 算术运算符
<table>
    <tr>
        <th colspan="3">表4.1 算术运算符（左结合律）</th>
    </tr>
    <tr>
        <td>运算符</td> <td>功能</td> <td>用法</td>
    </tr>
    <tr>
        <td>+</td> <td>一元正号</td> <td>+ expr</td>
    </tr>
    <tr>
        <td>-</td> <td>一元负号</td> <td>- expr</td>
    </tr>
    <tr>
        <td>*</td> <td>乘法</td> <td>expr * expr</td>
    </tr>
    <tr>
        <td>/</td> <td>除法</td> <td>expr / expr</td>
    </tr>
    <tr>
        <td>%</td> <td>求余</td> <td>expr % expr</td>
    </tr>
    <tr>
        <td>+</td> <td>加法</td> <td>expr + expr</td>
    </tr>
    <tr>
        <td>-</td> <td>减法</td> <td>expr - expr</td>
    </tr>
</table>
C++11规定商一律向0取整（即直接去除小数部分）。

## 4.3 逻辑和关系运算符
<table>
    <tr>
        <th colspan="4">表4.2 逻辑运算符和关系运算符</th>
    </tr>
    <tr>
        <td>结合律</td> <td>运算符</td> <td>功能</td> <td>用法</td>
    </tr>
    <tr>
        <td>右</td> <td>!</td> <td>逻辑非</td> <td>!expr</td>
    </tr>
    <tr>
        <td>左</td> <td><</td> <td>小于</td> <td>expr < expr</td>
    </tr>
    <tr>
        <td>左</td> <td><=</td> <td>小于等于</td> <td>expr <= expr</td>
    </tr>
    <tr>
        <td>左</td> <td>></td> <td>大于</td> <td>expr > expr</td>
    </tr>
    <tr>
        <td>左</td> <td>>=</td> <td>大于等于</td> <td>expr >= expr</td>
    </tr>
    <tr>
        <td>左</td> <td>==</td> <td>等于</td> <td>expr == expr</td>
    </tr>
    <tr>
        <td>左</td> <td>!=</td> <td>不等于</td> <td>expr != expr</td>
    </tr>
    <tr>
        <td>左</td> <td>&&</td> <td>逻辑与</td> <td>expr && expr</td>
    </tr>
    <tr>
        <td>左</td> <td>||</td> <td>逻辑或</td> <td>expr || expr</td>
    </tr>
</table>

## 4.4 赋值运算符
赋值运算符的左侧运算对象必须是一个可修改的左值。

## 4.5 递增和递减运算符
```c++
i++; ++i; i--; --i;
```
## 4.6 成员访问运算符

## 4.7 条件运算符

## 4.8 位运算符

## 4.9 sizeOf运算符

## 4.10 逗号运算符



## 第4章 练习题
### 4.1.2节练习
<b>练习4.1</b> 表达式5+10*20/2的求值结果是多少？

<b>练习4.2</b> 根据4.12节中的表，在下述表达式的合理位置添加括号，使得添加后运算对象的组合顺序与添加前一致。

### 4.1.3节练习
<b>练习4.3</b> C++语言没有明确规定大多数二元运算符的求值顺序，给编译器优化留下了余地。这种策略实际上是在代码生成效率和程序潜在缺陷之间进行了权衡，你
认为这可以接受吗？为什么？

### 4.2节练习
<b>练习4.4</b> 在下面的表达式中添加括号，说明其求值的过程和最终结果。编写程序编译该表达式并输出其结果验证之前的判断。
```c++
12 / 3 * 4 + 5 * 15 + 24 % 4 / 2
```
<b>练习4.5</b> 写出下列表达式的求值结果。
```text
(a) -30 * 3 + 21 / 5     (b) -30 + 3 * 21 / 5
(c) 30 / 3 * 21 % 5      (d) -30 / 3 * 21 % 4
```
<b>练习4.6</b> 写出一条表达式用于确定一个整数是奇数还是偶数。

<b>练习4.7</b> 溢出是何含义？写出3条将导致溢出的表达式。

### 4.3节练习
<b>练习4.8</b> 说明在逻辑与、逻辑或以及相等性运算符中运算对象的求值顺序。

<b>练习4.9</b> 解释在下面的if语句中条件部分的判断过程。
```c++
const char *p = "Hello World";
if (cp && *cp)
```
<b>练习4.10</b> 为while循环写一个条件，使其从标准输入中读取整数，遇到42时停止。

<b>练习4.11</b> 书写一条表达式用于测试4个值a、b、c、d的关系，确保a大于b、b大于c、c大于d。

<b>练习4.12</b> 假设i、j和k是3个整数，说明表达式i != j < k的含义。

### 4.4节练习
<b>练习4.13</b> 在下述语句中，当赋值完成后i和d的值分别是多少？
```text
int i; double d;
(a) d = i = 3.5;     (b) i = d = 3.5;
```
<b>练习4.14</b> 执行下述if语句后将发生什么情况？
```c++
if (42 = i) // ...
if (i = 42) // ...
```
<b>练习4.15</b> 下面的赋值是非法的，为什么？如何修正？
```c++
double dVal; int iVal; int *pi;
dVal = iVal = pi = 0;
```
<b>练习4.16</b> 尽管下面的语句合法，但它们实际执行的行为可能和预期不一样，为什么？如何修正？
```text
(a) if(p = getPtr() != 0)    (b) if(i = 1024)
```

### 4.5节练习
<b>练习4.17</b> 说明前置递增运算符和后置递增运算符的区别。

<b>练习4.18</b> 如果第132页那个输出vector对象元素的while循环使用前置递增运算符，将得到什么结果？

<b>练习4.19</b> 假设ptr的类型是指向int的指针、vec的类型是vector<int>、ival的类型是int，说明下面的表达式是何含义？如果有表达式不正确，为什么？
如何修正？
```text
int *ptr; vector<int> vec; int ival;
(a) ptr != 0 && *ptr++
(b) ival++ && ival
(c) vec[ival++] <= vec[ival]
```

